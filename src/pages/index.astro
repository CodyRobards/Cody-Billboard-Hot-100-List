---
import "../styles/critical.css";
import ResponsiveImage from "../components/ResponsiveImage.astro";
import navigationScriptHref from "../scripts/prefetch-navigation.ts?url";
import serviceWorkerScriptHref from "../scripts/register-service-worker.ts?url";
import nonCriticalStylesHref from "../styles/noncritical.css?url";

const title = "Astro Starter";
const heroImage = {
  src: "/images/meta/archive.jpg",
  width: 1600,
  height: 900,
  alt: "Filing cabinets and vinyl sleeves representing the Hot 100 archive",
  format: "jpg" as const,
};
const heroSizes = "(min-width: 72rem) 64rem, 100vw";
const heroMime = heroImage.format === "jpg" ? "jpeg" : (heroImage.format ?? "jpeg");
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{title}</title>
    <link rel="preload" as="style" href={nonCriticalStylesHref} onload="this.rel='stylesheet'" />
    <noscript>
      <link rel="stylesheet" href={nonCriticalStylesHref} />
    </noscript>
    <link
      rel="preload"
      as="image"
      href={heroImage.src}
      imagesrcset={`${heroImage.src} ${heroImage.width}w`}
      imagesizes={heroSizes}
      type={`image/${heroMime}`}
    />
  </head>
  <body>
    <main id="content-root">
      <section class="hero">
        <div class="hero__media">
          <ResponsiveImage
            image={heroImage}
            sizes={heroSizes}
            class="hero__image"
            loading="eager"
            decoding="sync"
          />
        </div>
        <div class="hero__content">
          <h1>{title}</h1>
          <p>
            Get started by editing <code>src/pages/index.astro</code> and explore the chart history archive
            imagery above.
          </p>
        </div>
      </section>
    </main>
    <script type="module" defer src={navigationScriptHref}></script>
    <script type="module" defer src={serviceWorkerScriptHref}></script>
    <style>
      .hero {
        display: grid;
        gap: 2rem;
        align-items: center;
      }

      @media (min-width: 48rem) {
        .hero {
          grid-template-columns: minmax(0, 1fr) minmax(0, 1fr);
        }
      }

      .hero__image {
        width: 100%;
        height: auto;
        border-radius: 0.75rem;
        box-shadow: 0 1.5rem 3rem rgba(15, 23, 42, 0.2);
      }

      .hero__content {
        display: flex;
        flex-direction: column;
        gap: 1rem;
      }
    </style>
  </body>
</html>
